:root{
  --bg:#F7F5FF; --card:#FFFFFF; --ink:#0F172A; --muted:#475569;
  --primary:#6D28D9; --accent:#4338CA; --soft:#EDE9FE; --border:#E9E7FF;
}
*{box-sizing:border-box}
body{font-family:'Kanit',system-ui,Arial;color:var(--ink);background:var(--bg)}
/* ✅ ให้หน้าที่เผลอใช้ bg-body-tertiary ก็ยังได้พื้นหลังตามธีม */
body.bg-body-tertiary{background:var(--bg)!important}

a{color:var(--primary)}a:hover{filter:brightness(.9)}
.navbar{background:rgba(255,255,255,.92)!important;border-bottom:1px solid var(--border);backdrop-filter:saturate(140%) blur(6px)}
.navbar .nav-link{color:#1f2937}.navbar .nav-link:hover{color:#4c1d95}

.card-clean{background:var(--card);border:1px solid var(--border);border-radius:16px;box-shadow:0 8px 28px rgba(67,56,202,.08)}
.btn-primary{background:var(--primary);border-color:var(--primary)}
.btn-primary:hover{filter:brightness(.95)}
.btn-outline-primary{border-color:var(--primary);color:var(--primary)}
.btn-outline-primary:hover{background:rgba(109,40,217,.08)}
.btn-soft{background:var(--soft);color:#4c1d95;border:1px solid var(--border)}

.svc-thumb{width:100%;aspect-ratio:16/9;object-fit:cover;border-top-left-radius:16px;border-top-right-radius:16px}
@supports not (aspect-ratio:16/9){.svc-thumb{height:210px;object-fit:cover}}
.svc-icon{width:44px;height:44px;border-radius:12px;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg, rgba(109,40,217,.12), rgba(67,56,202,.12));color:#4c1d95;font-size:22px}

.search-strip{background:#F6F3FF;border:1px solid var(--border);border-radius:16px}
.accordion-item{border:1px solid var(--border);border-radius:12px;overflow:hidden}
.accordion-button{background:#fff;color:var(--ink)}
.accordion-body{color:var(--muted)}

.fab-dock{position:fixed;right:16px;bottom:16px;display:flex;flex-direction:column;gap:10px;z-index:1040}
.fab{width:52px;height:52px;border-radius:50%;display:flex;align-items:center;justify-content:center;border:1px solid var(--border);background:#ffffff;color:#312e81;box-shadow:0 10px 26px rgba(49,46,129,.15)}
.fab-primary{background:var(--primary);color:#fff;border-color:#5b21b6}
.fab .badge{position:absolute;top:-6px;right:-6px}

.chat-widget{display:none;position:fixed;right:84px;bottom:16px;width:300px;max-width:92vw;background:#fff;border:1px solid var(--border);border-radius:16px;box-shadow:0 24px 60px rgba(49,46,129,.18);z-index:1040}
.chat-widget.open{display:block}
.chat-header{background:#F6F3FF;border-bottom:1px solid var(--border);padding:.55rem .85rem;border-top-left-radius:16px;border-top-right-radius:16px}
.chat-body{max-height:45vh;overflow:auto;padding:.7rem;background:#ffffff}
.chat-input{display:flex;gap:.5rem;padding:.55rem;border-top:1px solid var(--border);background:#fff;border-bottom-left-radius:16px;border-bottom-right-radius:16px}
.chat-msg{padding:.35rem .6rem;border-radius:14px;margin:.25rem 0;max-width:78%;font-size:.95rem;line-height:1.35}
.chat-msg.agent{background:#F6F3FF;border:1px solid var(--border);color:#4c1d95}
.chat-msg.user{background:#FFF7E6;border:1px solid #FDE68A;margin-left:auto;color:#854d0e}
@media (max-width:576px){.chat-widget{right:16px;bottom:78px;width:92vw}}

.table thead th{background:#F6F3FF}
.badge-outline{border:1px solid var(--border);color:#4c1d95;background:#fff}
.site-footer{background:#ffffff;border-top:1px solid var(--border)}

/* === Chat bubbles (public + admin) === */
.chat-msg{margin:.5rem 0;display:flex}
.chat-msg.user{justify-content:flex-end}
.chat-msg .bubble{max-width:75%;padding:.5rem .75rem;border-radius:1rem;word-break:break-word}
.chat-msg .meta{font-size:.75rem;color:#6c757d;margin:0 .5rem .25rem}
.chat-msg.user .bubble{background:#eef4ff}   /* ผู้ใช้ (ลูกค้า) ฟ้าอ่อน */
.chat-msg.admin .bubble{background:#eaf7ea}  /* แอดมิน เขียวอ่อน */
.chat-msg.bot .bubble{background:#f1f1f1}    /* ระบบ เทาอ่อน */

/* (ใช้กับหน้าแอดมินได้เหมือนกัน) */
.chat-row{margin:.5rem 0;display:flex}
.chat-row.admin{justify-content:flex-start}
.chat-row.user{justify-content:flex-end}
.chat-row .bubble{max-width:75%;padding:.5rem .75rem;border-radius:1rem;background:#f7f7f7}
.chat-row.admin .bubble{background:#eaf7ea}
.chat-row.user .bubble{background:#eef4ff}
.chat-row .meta{font-size:.75rem;color:#6c757d;margin:0 0 .25rem}

/* === Product card & Sale badge fix === */
.product-card .ratio{ position: relative; }

/* รูปให้ครอบเต็มกรอบ */
.product-card .ratio > img{
  position: absolute;
  top:0; right:0; bottom:0; left:0;
  width:100%; height:100%;
  object-fit: cover;
  z-index: 1;
}

/* ป้ายลดราคา — ต้อง override right/bottom ของ Bootstrap ด้วย */
.product-card .ratio > .sale-badge{
  position: absolute;
  top:.5rem; left:.5rem;
  right:auto; bottom:auto;    /* <-- ตัวนี้สำคัญ ไม่งั้นจะโดนดันเต็มกรอบ */
  width:auto; height:auto;    /* ไม่จำเป็นต้อง !important ถ้าลบของเดิมทิ้ง */
  z-index: 3;
  pointer-events: none;
}

/* Gradient ม่วงสำหรับปุ่ม */
.btn.btn-gradient{
  background-image: linear-gradient(90deg,#6f3ccf,#9b6bff) !important;
  border: 0 !important;
  color: #fff !important;
  /* กัน Bootstrap ทับ */
  --bs-btn-bg: transparent;
  --bs-btn-hover-bg: transparent;
  --bs-btn-border-color: transparent;
  --bs-btn-hover-border-color: transparent;
}
.btn.btn-gradient:hover{ filter: brightness(1.06); color:#fff !important; }


/* === Sold-out state for product cards === */
.product-card.is-soldout .ratio > img{
  filter: grayscale(100%);
  opacity: .55;
}
.product-card .soldout-badge{
  position:absolute; inset:0;
  display:flex; align-items:center; justify-content:center;
  color:#fff; font-weight:800; letter-spacing:.5px;
  text-shadow:0 1px 2px rgba(0,0,0,.35);
  background:linear-gradient(180deg, rgba(2,6,23,.18), rgba(2,6,23,.45));
  z-index:4; user-select:none;
}


/* ================= Floating Team Status Widget (bottom-left) ================= */
#status-widget{position:fixed;left:max(12px,env(safe-area-inset-left));bottom:max(12px,env(safe-area-inset-bottom));z-index:1200}
.tsw-online .tsw-dot{background:#22c55e}
.tsw-busy .tsw-dot{background:#f59e0b}
.tsw-off .tsw-dot{background:#9ca3af}
.tsw-pill,.tsw-card,.tsw-bubble-pop{
  color:#312e81;background:linear-gradient(180deg,rgba(109,40,217,.10),rgba(67,56,202,.16));
  border:1px solid rgba(109,40,217,.25);border-radius:14px;box-shadow:0 6px 16px rgba(2,6,23,.08);
  backdrop-filter:saturate(120%) blur(6px);
}
/* --- pill --- */
.tsw-pill{display:inline-flex;align-items:center;gap:.5rem;padding:.4rem .7rem;border-radius:999px;font-weight:700;font-size:.92rem}
.tsw-pill .tsw-dot{width:.6rem;height:.6rem;border-radius:50%}
.tsw-pill .tsw-count{background:#fff;padding:.12rem .44rem;border-radius:.5rem;font-weight:700}
@media(max-width:576px){ #status-widget .tsw-pill .tsw-count{display:none} }
/* --- card --- */
.tsw-card{display:flex;align-items:center;gap:.6rem;padding:.6rem .7rem;min-width:210px}
.tsw-card .tsw-icon{width:20px;height:20px;border-radius:6px;background:#4f46e5;display:grid;place-items:center;color:#fff;font-size:12px}
.tsw-card .tsw-dot{width:.55rem;height:.55rem;border-radius:50%;outline:2px solid #fff;margin-right:2px}
.tsw-card .tsw-row{display:flex;align-items:center;gap:.4rem;font-weight:700}
.tsw-card .tsw-note{font-size:12px;color:#4b5563;margin-top:2px;display:none}
.tsw-card[data-open="1"] .tsw-note{display:block}
/* --- bubble --- */
.tsw-bubble{position:relative}
.tsw-bubble .tsw-btn{width:42px;height:42px;border-radius:999px;border:1px solid rgba(109,40,217,.25);display:grid;place-items:center;background:#fff;box-shadow:0 6px 16px rgba(2,6,23,.08);cursor:pointer}
.tsw-bubble .tsw-btn .tsw-dot{width:12px;height:12px;border-radius:50%}
.tsw-bubble .tsw-pop{position:absolute;left:48px;bottom:0;transform-origin:left bottom;transform:scale(.92);opacity:0;pointer-events:none;transition:.16s ease;background:#fff;border:1px solid #eee;border-radius:12px;box-shadow:0 6px 16px rgba(2,6,23,.08);padding:.55rem .7rem;min-width:180px}
.tsw-bubble[data-open="1"] .tsw-pop{transform:scale(1);opacity:1;pointer-events:auto}
.tsw-bubble .tsw-pop .tsw-row{display:flex;align-items:center;gap:.44rem;font-weight:700;color:#111}
.tsw-bubble .tsw-pop .tsw-dot{width:.55rem;height:.55rem;border-radius:50%}
.tsw-bubble .tsw-pop .tsw-note{font-size:12px;color:#4b5563;margin-top:2px}
/* ============================================================================ */


/* === ADDON: copy link buttons (DO NOT REMOVE) === */
.btn-copylink.copied{ animation: copyPulse .8s ease; }
@keyframes copyPulse{ 0%{transform:scale(1)} 40%{transform:scale(1.05)} 100%{transform:scale(1)} }

/* ===== FUTURE PURPLE THEME – add at file end ===== */
:root{
  --bg: #0a0716;
  --card: rgba(18, 16, 34, .72);
  --border: rgba(255,255,255,.08);
  --text: #E9E8FF;
  --muted:#A6A4C7;
  --primary:#9B5CFF;      /* purple */
  --primary-2:#5B8DFF;    /* blue */
  --accent:#00E5FF;       /* cyan */
}

/* page animated backdrop */
#fx-bg{
  position: fixed; inset: 0; z-index:-1;
  background:
    radial-gradient(900px 900px at 10% -10%, rgba(89,0,255,.45), transparent 40%),
    radial-gradient(700px 700px at 110% 0%, rgba(0,180,255,.30), transparent 35%),
    radial-gradient(600px 600px at 50% 120%, rgba(255,0,240,.18), transparent 40%),
    var(--bg);
  animation:bgShift 28s ease-in-out infinite alternate;
  filter: saturate(120%);
}
@keyframes bgShift{
  0%   { transform: translate3d(0,0,0) scale(1);   }
  50%  { transform: translate3d(0,-10px,0) scale(1.02); }
  100% { transform: translate3d(0,10px,0) scale(1.01); }
}

/* Glassmorphism cards + glow */
.card{
  background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
  border: 1px solid var(--border);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  box-shadow: 0 10px 30px rgba(0,0,0,.35), 0 0 0 1px rgba(255,255,255,.02);
  transition: transform .35s cubic-bezier(.2,.8,.2,1), box-shadow .35s;
}
.card:hover{
  transform: translateY(-4px);
  box-shadow:
    0 14px 36px rgba(0,0,0,.45),
    0 0 24px rgba(155,92,255,.45),
    0 0 48px rgba(91,141,255,.25);
}

/* Futuristic primary buttons (keep Bootstrap class names) */
.btn-primary, .btn-gradient{
  --grad: linear-gradient(90deg, var(--primary), var(--primary-2) 55%, var(--accent));
  background: var(--grad);
  border: 0;
  color:#fff;
  box-shadow: 0 6px 22px rgba(91,141,255,.35);
  transition: filter .2s, transform .2s, box-shadow .2s;
}
.btn-primary:hover, .btn-gradient:hover{
  filter: brightness(1.08);
  transform: translateY(-1px);
  box-shadow: 0 10px 28px rgba(91,141,255,.45);
}
.btn-outline-primary{
  color:#fff; border:1px solid transparent;
  background: linear-gradient(#0000,#0000) padding-box,
              linear-gradient(90deg, var(--primary), var(--accent)) border-box;
}
.btn-outline-primary:hover{ color:#fff; filter:brightness(1.1); }

/* Gradient heading text */
.text-gradient{
  background: linear-gradient(90deg, #E4D4FF, #C4B2FF 40%, #9B5CFF 70%, #6EE7F9);
  -webkit-background-clip: text; background-clip: text;
  color: transparent;
  text-shadow: 0 6px 30px rgba(155,92,255,.25);
}

/* Reveal on scroll (paired with JS) */
[data-reveal]{opacity:0; transform: translateY(18px) scale(.98);
  transition: opacity .7s cubic-bezier(.2,.8,.2,1), transform .7s cubic-bezier(.2,.8,.2,1);}
.is-revealed{opacity:1; transform: none;}

/* Sale/Tag badges neon-ish (ไม่ไปทับ Bootstrap เดิม) */
.badge-neo{
  background: linear-gradient(90deg, var(--primary), var(--accent));
  color:#0b0b12; font-weight:700; border:0;
  box-shadow: 0 0 18px rgba(155,92,255,.55);
}

/* Hero/ratio images keep on top; sale-badge stays above */
.product-card .ratio{ position: relative; }
.product-card .ratio img{ position: relative; z-index: 1; object-fit: cover; }
.product-card .sale-badge{ position: absolute; top:.5rem; left:.5rem; z-index: 3; }

/* Small ambient border glow for inputs */
.form-control, .form-select{
  background: rgba(255,255,255,.03);
  border:1px solid var(--border); color: var(--text);
}
.form-control:focus, .form-select:focus{
  border-color: rgba(155,92,255,.6);
  box-shadow: 0 0 0 .2rem rgba(155,92,255,.25);
}

/* Optional navbar minimal tweak if present */
.navbar, header.sticky-header{
  background: rgba(15,12,28,.7); backdrop-filter: blur(10px);
  border-bottom: 1px solid var(--border);
}
body{ color:var(--text); }
small, .text-muted{ color:var(--muted) !important; }
