<!DOCTYPE html>
<html lang="th">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1" name="viewport"/>
  <title>
   หลังบ้าน — Grape &amp; Indigo
  </title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;600;700&amp;display=swap" rel="stylesheet"/>
  <link href="assets/styles.css" rel="stylesheet"/>
  <!-- Favicons -->
  <link href="/icons/favicon.ico" rel="icon" sizes="any"/>
  <link href="/icons/favicon-32x32.png" rel="icon" sizes="32x32" type="image/png"/>
  <link href="/icons/favicon-16x16.png" rel="icon" sizes="16x16" type="image/png"/>
  <link href="/icons/apple-touch-icon.png" rel="apple-touch-icon"/>
  <link href="/icons/site.webmanifest" rel="manifest"/>
  <meta content="#6C37FF" name="theme-color"/>
  <style>
   .sidebar{min-width:260px;max-width:260px;background:#fff;border-right:1px solid var(--border);min-height:100vh;position:sticky;top:0}
  .sidebar .brand{color:var(--primary)}
  .nav-pills .nav-link.active{background:var(--primary)}
  .stat{background:#fff;border:1px solid var(--border);border-radius:14px;padding:14px}
  .header{background:#fff;border-bottom:1px solid var(--border)}

/* === Collapsible Sidebar (added) === */
@media (min-width: 768px){
  body.sidebar-collapsed #adminSidebar{ display:none !important; }
}
/* Keep content full width when collapsed (flex layout handles it) */
  </style>
  <link href="admin-calendar.css?v=3" rel="stylesheet"/>
  <meta content="AllTasks24 — รับจ้างสารพัด 24 ชั่วโมง: ส่งของ เอกสาร งานช่าง ทำความสะอาด ซักรีด และอีกมากมาย ในจังหวัดนครสวรรค์ สื่อสารง่าย เรียกใช้งานได้ตลอด 24 ชม." name="description"/>
  <link href="https://alltasks24.online/admin.html" rel="canonical"/>
  <!-- SEO auto (safe-add) -->
  <meta content="website" property="og:type"/>
  <meta content="หลังบ้าน — Grape &amp; Indigo" property="og:title"/>
  <meta content="AllTasks24 — รับจ้างสารพัด 24 ชั่วโมง: ส่งของ เอกสาร งานช่าง ทำความสะอาด ซักรีด และอีกมากมาย ในจังหวัดนครสวรรค์ สื่อสารง่าย เรียกใช้งานได้ตลอด 24 ชม." property="og:description"/>
  <meta content="https://alltasks24.online/admin.html" property="og:url"/>
  <meta content="/icons/android-chrome-512x512.png" property="og:image"/>
  <meta content="summary_large_image" name="twitter:card"/>
  <meta content="หลังบ้าน — Grape &amp; Indigo" name="twitter:title"/>
  <meta content="AllTasks24 — รับจ้างสารพัด 24 ชั่วโมง: ส่งของ เอกสาร งานช่าง ทำความสะอาด ซักรีด และอีกมากมาย ในจังหวัดนครสวรรค์ สื่อสารง่าย เรียกใช้งานได้ตลอด 24 ชม." name="twitter:description"/>
  <meta content="/icons/android-chrome-512x512.png" name="twitter:image"/>
  <script type="application/ld+json">
   {"@context": "https://schema.org", "@type": "WebSite", "name": "AllTasks24", "url": "https://alltasks24.online"}
  </script>
 </head>
 <body>
  <nav class="navbar navbar-light bg-white border-bottom sticky-top">
   <div class="container-fluid">
    <button class="btn btn-outline-primary btn-sm me-2 d-none d-md-inline-flex" id="btnSidebar">
     <i class="bi bi-list">
     </i>
    </button>
    <span class="navbar-brand mb-0 h5">
     alltasks24 — Admin
    </span>
    <div class="d-flex align-items-center gap-2">
     <span class="badge text-bg-warning">
      รีวิวใหม่
      <span id="countNewReviews">
       0
      </span>
     </span>
     <button class="btn btn-outline-primary btn-sm" id="btnLogout">
      <i class="bi bi-box-arrow-right me-1">
      </i>
      ออกจากระบบ
     </button>
    </div>
   </div>
  </nav>
  <div class="d-flex">
   <!-- เมนูฝั่งซ้าย -->
   <aside class="sidebar p-3 d-none d-md-block" id="adminSidebar">
    <div class="nav nav-pills flex-column gap-1" role="tablist">
     <button class="nav-link active" data-bs-target="#tab-dashboard" data-bs-toggle="pill">
      <i class="bi bi-speedometer2 me-2">
      </i>
      แดชบอร์ด
     </button>
     <button class="nav-link" data-bs-target="#tab-services" data-bs-toggle="pill">
      <i class="bi bi-grid me-2">
      </i>
      บริการ
     </button>
     <button class="nav-link" data-bs-target="#tab-areas" data-bs-toggle="pill">
      <i class="bi bi-geo-alt me-2">
      </i>
      พื้นที่
     </button>
     <button class="nav-link" data-bs-target="#tab-bookings" data-bs-toggle="pill">
      <i class="bi bi-calendar-check me-2">
      </i>
      การจอง
     </button>
     <button class="nav-link" data-bs-target="#tab-calendar" data-bs-toggle="pill">
      <i class="bi bi-calendar3 me-2">
      </i>
      ปฏิทินงาน
     </button>
     <button class="nav-link" data-bs-target="#tab-tickets" data-bs-toggle="pill">
      <i class="bi bi-inbox me-2">
      </i>
      คำขอ/แจ้งปัญหา
     </button>
     <button class="nav-link" data-bs-target="#tab-reviews" data-bs-toggle="pill">
      <i class="bi bi-chat-quote me-2">
      </i>
      รีวิว
     </button>
     <button class="nav-link" data-bs-target="#tab-users" data-bs-toggle="pill">
      <i class="bi bi-people me-2">
      </i>
      ผู้ใช้/บทบาท
     </button>
     <button class="nav-link" data-bs-target="#tab-promos" data-bs-toggle="pill">
      <i class="bi bi-ticket-perforated me-2">
      </i>
      โปรโมชัน
     </button>
     <button class="nav-link" data-bs-target="#tab-banners" data-bs-toggle="pill">
      <i class="bi bi-images me-2">
      </i>
      แบนเนอร์
     </button>
     <!-- ปุ่มเมนูร้านค้า/สินค้า (ใหม่ วางถูกตำแหน่งแล้ว) -->
     <button class="nav-link" data-bs-target="#tab-products" data-bs-toggle="pill" id="tab-products-tab">
      <i class="bi bi-bag me-2">
      </i>
      ร้านค้า
     </button>
     <button class="nav-link" data-bs-target="#tab-pricing" data-bs-toggle="pill" id="tab-pricing-tab">
      <i class="bi bi-calculator me-2">
      </i>
      คำนวณราคา
     </button>
     <button class="nav-link" data-bs-target="#tab-faq" data-bs-toggle="pill">
      <i class="bi bi-question-circle me-2">
      </i>
      FAQ
     </button>
     <button class="nav-link" data-bs-target="#tab-settings" data-bs-toggle="pill">
      <i class="bi bi-gear me-2">
      </i>
      ตั้งค่า
     </button>
     <button class="nav-link" data-bs-target="#tab-chat" data-bs-toggle="pill">
      <i class="bi bi-chat-dots me-2">
      </i>
      แชทสด
     </button>
     <button class="nav-link" data-bs-target="#tab-income" data-bs-toggle="pill" type="button">
      <i class="bi bi-cash-coin me-2">
      </i>
      บัญชี/รายรับ-รายจ่าย
     </button>
    </div>
   </aside>
   <!-- เนื้อหาฝั่งขวา -->
   <div class="flex-grow-1 p-3">
    <div class="tab-content">
     <!-- แดชบอร์ด -->
     <div class="tab-pane fade show active" id="tab-dashboard">
      <div class="row g-3 mb-3">
       <div class="col-md-3">
        <div class="stat">
         <div class="text-muted">
          คำขอจอง
         </div>
         <div class="h4 mb-0" id="countBookings">
          0
         </div>
        </div>
       </div>
       <div class="col-md-3">
        <div class="stat">
         <div class="text-muted">
          ผู้ใช้งาน (roles)
         </div>
         <div class="h4 mb-0" id="countUsers">
          0
         </div>
        </div>
       </div>
       <div class="col-md-3">
        <div class="stat">
         <div class="text-muted">
          โปรโมชัน
         </div>
         <div class="h4 mb-0" id="countPromos">
          0
         </div>
        </div>
       </div>
      </div>
      <!-- === Dashboard Enhancements (auto-injected) === -->
      <div class="row g-3 mb-3">
       <div class="col-md-3">
        <div class="stat">
         <div class="text-muted small">
          บริการทั้งหมด
         </div>
         <div class="h4 mb-0" id="countServices">
          0
         </div>
        </div>
       </div>
       <div class="col-md-3">
        <div class="stat">
         <div class="text-muted small">
          รีวิวทั้งหมด
         </div>
         <div class="h4 mb-0" id="countReviewsAll">
          0
         </div>
        </div>
       </div>
       <div class="col-md-3">
        <div class="stat">
         <div class="text-muted small">
          โปรโมชันที่ใช้งาน
         </div>
         <div class="h4 mb-0" id="countPromosActive">
          0
         </div>
        </div>
       </div>
      </div>
      <div class="row g-3">
       <div class="col-lg-6">
        <div class="card card-clean p-3 h-100">
         <div class="fw-bold mb-2">
          การจองล่าสุด
         </div>
         <div class="table-responsive">
          <table class="table table-sm align-middle">
           <thead>
            <tr>
             <th>
              บริการ
             </th>
             <th>
              ลูกค้า
             </th>
             <th>
              วันที่
             </th>
             <th>
              หมายเหตุ
             </th>
            </tr>
           </thead>
           <tbody id="latestBookingsBody">
            <tr>
             <td class="text-muted small" colspan="4">
              ยังไม่มีข้อมูล
             </td>
            </tr>
           </tbody>
          </table>
         </div>
        </div>
       </div>
       <div class="col-lg-6">
        <div class="card card-clean p-3 h-100">
         <div class="fw-bold mb-2">
          โปรโมชันที่กำลังใช้งาน
         </div>
         <ul class="list-group small" id="activePromoList">
         </ul>
        </div>
       </div>
      </div>
      <div class="row g-3 mt-1">
       <div class="col-lg-6">
        <div class="card card-clean p-3 h-100">
         <div class="fw-bold mb-2">
          บริการยอดนิยม
         </div>
         <div class="table-responsive">
          <table class="table table-sm align-middle">
           <thead>
            <tr>
             <th style="width:40px">
              #
             </th>
             <th>
              บริการ
             </th>
             <th class="text-end">
              จำนวนการจอง
             </th>
             <th class="text-end">
              แจ้งปัญหา
             </th>
            </tr>
           </thead>
           <tbody id="topServicesBody">
            <tr>
             <td class="text-muted small" colspan="4">
              ยังไม่มีข้อมูล
             </td>
            </tr>
           </tbody>
          </table>
         </div>
        </div>
       </div>
       <div class="col-lg-6">
        <div class="card card-clean p-3 h-100">
         <div class="fw-bold mb-2">
          สถิติ
         </div>
         <div class="mb-3">
          <canvas height="140" id="chartDaily">
          </canvas>
         </div>
         <div>
          <canvas height="140" id="chartMonthly">
          </canvas>
         </div>
        </div>
       </div>
      </div>
      <div class="card card-clean p-3 mt-3">
       <div class="fw-bold mb-2">
        การแจ้งเตือน
       </div>
       <div class="vstack gap-2" id="notifBox">
       </div>
      </div>
      <!-- === /Dashboard Enhancements === -->
     </div>
     <!-- บริการ -->
     <div class="tab-pane fade" id="tab-services">
      <div class="d-flex justify-content-between align-items-center mb-2">
       <h5 class="mb-0">
        จัดการบริการ
       </h5>
       <button class="btn btn-primary btn-sm" data-bs-target="#svcModal" data-bs-toggle="modal">
        <i class="bi bi-plus-lg me-1">
        </i>
        เพิ่มบริการ
       </button>
      </div>
      <table class="table table-hover align-middle">
       <thead>
        <tr>
         <th>
          ชื่อบริการ
         </th>
         <th>
          หมวดหมู่
         </th>
         <th>
          ภาพ
         </th>
         <th class="text-end">
          จัดการ
         </th>
        </tr>
       </thead>
       <tbody id="svcTableBody">
       </tbody>
      </table>
     </div>
     <!-- ร้านค้า/สินค้า -->
     <div aria-labelledby="tab-products-tab" class="tab-pane fade" id="tab-products" role="tabpanel">
      <div class="row g-3 mt-3">
       <!-- ฟอร์มสินค้า -->
       <div class="col-lg-5">
        <div class="card">
         <div class="card-header fw-semibold">
          เพิ่ม/แก้สินค้า
         </div>
         <div class="card-body">
          <form id="productForm">
           <input id="prodId" type="hidden"/>
           <div class="mb-2">
            <label class="form-label">
             ชื่อ
            </label>
            <input class="form-control" id="name" required=""/>
           </div>
           <div class="mb-2">
            <label class="form-label">
             คำอธิบาย
            </label>
            <textarea class="form-control" id="desc" rows="3"></textarea>
           </div>
           <div class="row g-2">
            <div class="col-6">
             <label class="form-label">
              ราคา (฿)
             </label>
             <input class="form-control" id="price" required="" type="number"/>
            </div>
            <div class="col-6">
             <label class="form-label">
              หน่วย
             </label>
             <input class="form-control" id="unit" placeholder="ครั้ง / แพ็ก / เที่ยว"/>
            </div>
           </div>
           <div class="row g-2 mt-1">
            <div class="col-4">
             <label class="form-label">
              Sale (฿)
             </label>
             <input class="form-control" id="salePrice" type="number"/>
            </div>
            <div class="col-4">
             <label class="form-label">
              เริ่มโปรฯ
             </label>
             <input class="form-control" id="saleStart" type="datetime-local"/>
            </div>
            <div class="col-4">
             <label class="form-label">
              จบโปรฯ
             </label>
             <input class="form-control" id="saleEnd" type="datetime-local"/>
            </div>
           </div>
           <div class="mt-2">
            <label class="form-label">
             รูปปก (URL)
            </label>
            <input class="form-control" id="cover" placeholder="https://..."/>
           </div>
           <div class="mt-2">
            <label class="form-label">
             แกลเลอรี (คั่นด้วย , )
            </label>
            <input class="form-control" id="gallery" placeholder="https://..., https://..."/>
           </div>
           <div class="mt-2">
            <label class="form-label">
             แท็ก (คั่นด้วย , )
            </label>
            <input class="form-control" id="tags" placeholder="ทำความสะอาด, โปรฯ"/>
           </div>
           <div class="row g-2 mt-1">
            <div class="col-4">
             <label class="form-label">
              สต็อก
             </label>
             <input class="form-control" id="stock" placeholder="เว้นได้" type="number"/>
            </div>
            <div class="col-4">
             <label class="form-label">
              ลำดับ (rank)
             </label>
             <input class="form-control" id="rank" type="number" value="999"/>
            </div>
            <div class="col-4">
             <label class="form-label">
              โปรโมชัน
             </label>
             <input class="form-control" id="promoText" placeholder="ส่งฟรี/คูปอง..."/>
            </div>
           </div>
           <div class="row g-2 mt-2">
            <div class="col-6">
             <div class="form-check">
              <input class="form-check-input" id="featured" type="checkbox"/>
              <label class="form-check-label" for="featured">
               แนะนำ (หน้าแรก)
              </label>
             </div>
             <div class="form-check">
              <input class="form-check-input" id="isBestSeller" type="checkbox"/>
              <label class="form-check-label" for="isBestSeller">
               ฮิต
              </label>
             </div>
             <div class="form-check">
              <input class="form-check-input" id="isNew" type="checkbox"/>
              <label class="form-check-label" for="isNew">
               ใหม่
              </label>
             </div>
            </div>
            <div class="col-6">
             <div class="form-check">
              <input class="form-check-input" id="freeShip" type="checkbox"/>
              <label class="form-check-label" for="freeShip">
               ส่งฟรี
              </label>
             </div>
             <div class="form-check">
              <input checked="" class="form-check-input" id="isActive" type="checkbox"/>
              <label class="form-check-label" for="isActive">
               เปิดแสดง
              </label>
             </div>
            </div>
           </div>
           <div class="d-flex gap-2 mt-3">
            <button class="btn btn-primary" id="btnSave" type="submit">
             บันทึก
            </button>
            <button class="btn btn-secondary" id="btnReset" type="button">
             ล้างฟอร์ม
            </button>
            <button class="btn btn-outline-danger d-none" id="btnDelete" type="button">
             ลบ
            </button>
           </div>
          </form>
         </div>
        </div>
       </div>
       <!-- ตารางสินค้า -->
       <div class="col-lg-7">
        <div class="card">
         <div class="card-header fw-semibold d-flex justify-content-between">
          รายการสินค้า
          <span class="small text-muted">
           เรียงตาม rank
          </span>
         </div>
         <div class="card-body p-0">
          <div class="table-responsive">
           <table class="table table-sm align-middle mb-0">
            <thead class="table-light">
             <tr>
              <th style="width:56px">
               ลำดับ
              </th>
              <th>
               ชื่อ
              </th>
              <th>
               ราคา
              </th>
              <th>
               แท็ก
              </th>
              <th>
               แนะนำ
              </th>
              <th>
               เปิด
              </th>
              <th style="width:160px">
               จัดการ
              </th>
             </tr>
            </thead>
            <tbody id="productsTable">
            </tbody>
           </table>
          </div>
         </div>
        </div>
       </div>
      </div>
     </div>
     <!-- คำนวณราคา -->
     <div aria-labelledby="tab-pricing-tab" class="tab-pane fade" id="tab-pricing" role="tabpanel">
      <div class="card">
       <div class="card-header d-flex justify-content-between align-items-center">
        <div class="fw-semibold">
         คำนวณราคา &amp; บิล
        </div>
        <div class="d-flex gap-2">
         <a class="btn btn-outline-primary btn-sm" href="Calculation%20system.html" target="_blank">
          <i class="bi bi-box-arrow-up-right me-1">
          </i>
          เปิดเต็มหน้าจอ
         </a>
         <button class="btn btn-outline-secondary btn-sm" id="btnReloadPricing">
          <i class="bi bi-arrow-repeat me-1">
          </i>
          รีโหลด
         </button>
        </div>
       </div>
       <div class="card-body p-0">
        <iframe id="pricingFrame" loading="lazy" src="Calculation%20system.html" style="width:100%;height:calc(100vh - 240px);border:0">
        </iframe>
       </div>
      </div>
     </div>
     <!-- พื้นที่ -->
     <div class="tab-pane fade" id="tab-areas">
      <div class="row g-3">
       <div class="col-lg-8">
        <div class="card card-clean p-2">
         <div class="ratio ratio-16x9">
          <iframe id="adminMap" src="https://www.google.com/maps?q=นครสวรรค์&amp;output=embed">
          </iframe>
         </div>
        </div>
       </div>
       <div class="col-lg-4">
        <div class="card card-clean p-3">
         <h6>
          พื้นที่ให้บริการ
         </h6>
         <ul class="list-group" id="areaListAdmin">
         </ul>
         <div class="mt-3">
          <input class="form-control mb-2" id="areaName" placeholder="ชื่อพื้นที่"/>
          <input class="form-control mb-2" id="areaProv" placeholder="จังหวัด"/>
          <textarea class="form-control mb-2" id="areaGeo" placeholder="GeoJSON Polygon (ไม่บังคับ)" rows="2"></textarea>
          <button class="btn btn-primary btn-sm" id="areaAdd">
           เพิ่มพื้นที่
          </button>
         </div>
        </div>
       </div>
      </div>
     </div>
     <!-- การจอง -->
     <div class="tab-pane fade" id="tab-bookings">
      <h5>
       การจองงาน/นัดหมาย
      </h5>
      <table class="table table-hover align-middle">
       <thead>
        <tr>
         <th>
          ชื่อลูกค้า
         </th>
         <th>
          บริการ
         </th>
         <th>
          เบอร์โทร
         </th>
         <th>
          รายละเอียดเพิ่มเติม
         </th>
         <th>
          วันที่
         </th>
         <th>
          สถานะ
         </th>
         <th class="text-end">
          จัดการ
         </th>
        </tr>
       </thead>
       <tbody id="bookTableBody">
       </tbody>
      </table>
     </div>
     <!-- ใบเสนอราคา/ปัญหา -->
     <div class="tab-pane fade" id="tab-tickets">
      <h5>
       คำขอใบเสนอราคา / แจ้งปัญหา
      </h5>
      <table class="table table-hover align-middle">
       <thead>
        <tr>
         <th>
          อีเมล
         </th>
         <th>
          หัวข้อ
         </th>
         <th>
          รายละเอียดทั้งหมด
         </th>
         <th>
          สถานะ
         </th>
         <th class="text-end">
          จัดการ
         </th>
        </tr>
       </thead>
       <tbody id="ticketTableBody">
       </tbody>
      </table>
     </div>
     <!-- รีวิว -->
     <div class="tab-pane fade" id="tab-reviews">
      <div class="d-flex justify-content-between align-items-center mb-2">
       <h5 class="mb-0">
        จัดการรีวิว (รออนุมัติ)
       </h5>
      </div>
      <table class="table table-hover align-middle">
       <thead>
        <tr>
         <th>
          ผู้ใช้
         </th>
         <th>
          คะแนน
         </th>
         <th>
          ข้อความ
         </th>
         <th class="text-end">
          อนุมัติ
         </th>
        </tr>
       </thead>
       <tbody id="reviewTableBody">
       </tbody>
      </table>
      <div class="mt-4">
       <div class="d-flex justify-content-between align-items-center mb-2">
        <h5 class="mb-0">
         รีวิวที่อนุมัติแล้ว
        </h5>
       </div>
       <table class="table table-hover align-middle">
        <thead>
         <tr>
          <th>
           ผู้ใช้
          </th>
          <th>
           คะแนน
          </th>
          <th>
           ข้อความ
          </th>
          <th class="text-end">
           จัดการ
          </th>
         </tr>
        </thead>
        <tbody id="reviewApprovedTableBody">
        </tbody>
       </table>
      </div>
     </div>
     <!-- ผู้ใช้/บทบาท -->
     <div class="tab-pane fade" id="tab-users">
      <h5>
       ผู้ใช้ / บทบาท
      </h5>
      <div class="alert alert-info small">
       จัดการผ่านคอลเลกชัน
       <code>
        roles/{uid}
       </code>
       role = owner/admin/viewer
      </div>
     </div>
     <!-- โปรโมชัน -->
     <div class="tab-pane fade" id="tab-promos">
      <div class="d-flex justify-content-between align-items-center mb-2">
       <h5 class="mb-0">
        โปรโมชัน
       </h5>
       <button class="btn btn-primary btn-sm" data-bs-target="#promoModal" data-bs-toggle="modal">
        <i class="bi bi-plus-lg me-1">
        </i>
        เพิ่มโปรโมชัน
       </button>
      </div>
      <table class="table table-hover">
       <thead>
        <tr>
         <th>
          ชื่อ
         </th>
         <th>
          ช่วงเวลา
         </th>
         <th>
          คำอธิบาย
         </th>
         <th class="text-end">
          จัดการ
         </th>
        </tr>
       </thead>
       <tbody id="promoTableBody">
       </tbody>
      </table>
     </div>
     <!-- แบนเนอร์ -->
     <div class="tab-pane fade" id="tab-banners">
      <div class="d-flex justify-content-between align-items-center mb-2">
       <h5 class="mb-0">
        แบนเนอร์สไลด์ (Carousel)
       </h5>
       <button class="btn btn-primary btn-sm" data-bs-target="#bannerModal" data-bs-toggle="modal">
        <i class="bi bi-plus-lg me-1">
        </i>
        เพิ่มสไลด์
       </button>
      </div>
      <table class="table table-hover">
       <thead>
        <tr>
         <th>
          หัวเรื่อง
         </th>
         <th>
          คำอธิบาย
         </th>
         <th>
          ภาพ
         </th>
         <th class="text-end">
          จัดการ
         </th>
        </tr>
       </thead>
       <tbody id="bannerTableBody">
       </tbody>
      </table>
     </div>
     <!-- ปฏิทินงาน -->
     <div class="tab-pane fade" id="tab-calendar">
      <div class="d-flex flex-wrap align-items-center gap-2 mb-3">
       <input class="form-control" id="calDate" style="max-width:220px;" type="date"/>
       <select class="form-select" id="calView" style="max-width:160px;">
        <option value="today">
         Today
        </option>
        <option value="week">
         Week
        </option>
       </select>
       <select class="form-select" id="calStatus" style="max-width:200px;">
        <option value="">
         สถานะทั้งหมด
        </option>
        <option value="pending">
         รอตรวจ
        </option>
        <option value="confirmed">
         ยืนยันแล้ว
        </option>
        <option value="in_progress">
         กำลังทำ
        </option>
        <option value="done">
         เสร็จแล้ว
        </option>
        <option value="canceled">
         ยกเลิก
        </option>
       </select>
       <button class="btn btn-outline-secondary btn-sm" id="calRefresh">
        <i class="bi bi-arrow-repeat me-1">
        </i>
        รีโหลด
       </button>
      </div>
      <div class="vstack gap-2" id="calTodayWrap">
       <div class="card card-clean p-3">
        <div class="fw-semibold mb-2">
         <i class="bi bi-list-task me-2">
         </i>
         งานวันนี้
        </div>
        <div class="list-group" id="calTodayList">
        </div>
       </div>
      </div>
      <div class="d-none" id="calWeekWrap">
       <div class="card card-clean p-3">
        <div class="fw-semibold mb-2">
         <i class="bi bi-grid-3x3-gap me-2">
         </i>
         สัปดาห์นี้
        </div>
        <div class="cal-week-grid" id="calWeekGrid">
        </div>
       </div>
      </div>
     </div>
     <!-- FAQ -->
     <div class="tab-pane fade" id="tab-faq">
      <h5>
       คำถามที่พบบ่อย (FAQ)
      </h5>
      <div class="card card-clean p-3">
       <div class="d-flex gap-2 mb-2">
        <input class="form-control" id="faqQ" placeholder="คำถาม"/>
        <input class="form-control" id="faqA" placeholder="คำตอบ"/>
        <button class="btn btn-primary" id="faqAdd">
         เพิ่ม
        </button>
       </div>
       <ul class="list-group" id="faqList">
       </ul>
      </div>
     </div>
     <!-- ตั้งค่า -->
     <div class="tab-pane fade" id="tab-settings">
      <h5>
       ตั้งค่าทั่วไปของเว็บไซต์
      </h5>
      <div class="row g-3">
       <div class="col-md-6">
        <label class="form-label">
         ชื่อเว็บ
        </label>
        <input class="form-control" id="setSite" value="alltasks24.online"/>
        <div class="card card-clean p-3 my-3">
         <div class="fw-semibold mb-2">
          สถานะทีม (แสดงบนวิดเจ็ตลอย)
         </div>
         <div class="row g-2 align-items-center">
          <div class="col-12 col-md-7 d-flex flex-wrap align-items-center gap-3">
           <div class="form-check">
            <input class="form-check-input" id="teamStateOnline" name="teamState" type="radio" value="online"/>
            <label class="form-check-label" for="teamStateOnline">
             ออนไลน์
            </label>
           </div>
           <div class="form-check">
            <input class="form-check-input" id="teamStateBusy" name="teamState" type="radio" value="busy"/>
            <label class="form-check-label" for="teamStateBusy">
             ติดงาน
            </label>
           </div>
           <div class="form-check">
            <input checked="" class="form-check-input" id="teamStateOff" name="teamState" type="radio" value="off"/>
            <label class="form-check-label" for="teamStateOff">
             ไม่ว่าง
            </label>
           </div>
           <div class="input-group" style="max-width:180px">
            <span class="input-group-text">
             จำนวน
            </span>
            <input class="form-control" id="teamCount" min="0" type="number" value="1"/>
           </div>
          </div>
          <div class="col-12 col-md-5 d-flex align-items-center gap-2">
           <input class="form-control" id="teamNote" placeholder="หมายเหตุ (ไม่บังคับ)"/>
           <span class="text-muted small">
            ใช้ปุ่ม “บันทึก” ด้านล่าง
           </span>
          </div>
         </div>
        </div>
       </div>
       <div class="col-md-6">
        <label class="form-label">
         หมายเลขโทรศัพท์
        </label>
        <input class="form-control" id="setPhone" value="080-000-0000"/>
       </div>
       <div class="col-md-6">
        <label class="form-label">
         LINE
        </label>
        <input class="form-control" id="setLine" value="@yourline"/>
       </div>
       <div class="col-md-6">
        <label class="form-label">
         Facebook
        </label>
        <input class="form-control" id="setFb" value="https://facebook.com/"/>
       </div>
       <div class="col-12">
        <label class="form-label">
         Hero Text
        </label>
        <input class="form-control" id="setHero" value="รับจ้างสารพัด 24 ชั่วโมง"/>
       </div>
       <div class="col-12">
        <label class="form-label">
         หัวข้อใหญ่หน้าแรก (Hero Headline)
        </label>
        <input class="form-control" id="setHeroTitle" placeholder="พร้อมลุยทุกงานที่คุณต้องการ"/>
       </div>
       <div class="col-12">
        <label class="form-label">
         คำอธิบายย่อย (Hero Subtitle)
        </label>
        <input class="form-control" id="setHeroSubtitle" placeholder="เรียกใช้บริการได้ทันที สะดวก โปร่งใส"/>
       </div>
       <div class="col-12">
        <label class="form-label">
         URL แผนที่ (Embed)
        </label>
        <input class="form-control" id="setMap" placeholder="https://www.google.com/maps?..."/>
       </div>
       <div class="col-12">
        <label class="form-label">
         นโยบายสื่อ
        </label>
        <textarea class="form-control" id="setPolicy" rows="3">เนื้อหาตัวอย่างนโยบาย</textarea>
       </div>
       <div class="col-12">
        <button class="btn btn-primary mt-2" id="saveSettings">
         บันทึก
        </button>
       </div>
      </div>
     </div>
     <!-- แชทสด -->
     <div class="tab-pane fade" id="tab-chat">
      <div class="row g-3">
       <div class="col-md-4">
        <div class="card card-clean">
         <div class="card-header">
          ห้องสนทนา
         </div>
         <div class="list-group list-group-flush" id="threadList" style="max-height:60vh;overflow:auto">
         </div>
        </div>
       </div>
       <div class="col-md-8">
        <div class="card card-clean">
         <div class="card-header">
          ข้อความ
         </div>
         <div class="p-2" id="chatMsgs" style="height:50vh;overflow:auto">
         </div>
         <div class="card-footer d-flex gap-2">
          <input class="form-control" id="adminMsg" placeholder="พิมพ์ข้อความ..."/>
          <button class="btn btn-primary" id="adminSend">
           ส่ง
          </button>
         </div>
        </div>
       </div>
      </div>
     </div>
     <div class="tab-pane fade" id="tab-income">
      <div class="ratio ratio-16x9">
       <iframe class="w-100 h-100" src="admin-income.html" style="border:0; min-height:80vh">
       </iframe>
      </div>
     </div>
    </div>
    <!-- /.tab-content -->
   </div>
   <!-- /.content -->
  </div>
  <!-- /.layout -->
  <!-- โมดอลบริการ -->
  <div class="modal fade" id="svcModal" tabindex="-1">
   <div class="modal-dialog">
    <div class="modal-content">
     <div class="modal-header">
      <h5 class="modal-title">
       บริการ
      </h5>
      <button class="btn-close" data-bs-dismiss="modal">
      </button>
     </div>
     <div class="modal-body">
      <input id="svcId" type="hidden"/>
      <label class="form-label">
       ชื่อบริการ
      </label>
      <input class="form-control" id="svcName"/>
      <label class="form-label mt-2">
       หมวดหมู่
      </label>
      <input class="form-control" id="svcCat"/>
      <label class="form-label mt-2">
       ภาพ (ลิงก์)
      </label>
      <input class="form-control" id="svcImg"/>
      <label class="form-label mt-2">
       รายละเอียด
      </label>
      <textarea class="form-control" id="svcDesc" rows="3"></textarea>
      <label class="form-label mt-2">
       ป้ายกำกับ (คั่นด้วย , )
      </label>
      <input class="form-control" id="svcTags" placeholder="เช่น ด่วน 24 ชม., รายครั้ง, รายเดือน"/>
      <label class="form-label mt-2">
       แกลเลอรีผลงาน (1 ลิงก์ต่อ 1 บรรทัด)
      </label>
      <textarea class="form-control" id="svcGallery" placeholder="https://...1.jpg
https://...2.jpg" rows="4"></textarea>
     </div>
     <div class="modal-footer">
      <button class="btn btn-primary" id="svcSave">
       บันทึก
      </button>
     </div>
    </div>
   </div>
  </div>
  <!-- โมดอลโปรโมชัน -->
  <div class="modal fade" id="promoModal" tabindex="-1">
   <div class="modal-dialog">
    <div class="modal-content">
     <div class="modal-header">
      <h5 class="modal-title">
       โปรโมชัน
      </h5>
      <button class="btn-close" data-bs-dismiss="modal">
      </button>
     </div>
     <div class="modal-body">
      <input id="promoId" type="hidden"/>
      <label class="form-label">
       ชื่อ
      </label>
      <input class="form-control" id="promoTitle"/>
      <label class="form-label mt-2">
       คำอธิบาย
      </label>
      <textarea class="form-control" id="promoDesc"></textarea>
      <label class="form-label mt-2">
       ภาพ (ลิงก์)
      </label>
      <input class="form-control" id="promoImg"/>
      <div class="row mt-2">
       <div class="col">
        <label class="form-label">
         เริ่ม
        </label>
        <input class="form-control" id="promoStart" type="date"/>
       </div>
       <div class="col">
        <label class="form-label">
         สิ้นสุด
        </label>
        <input class="form-control" id="promoEnd" type="date"/>
       </div>
      </div>
     </div>
     <div class="modal-footer">
      <button class="btn btn-primary" id="promoSave">
       บันทึก
      </button>
     </div>
    </div>
   </div>
  </div>
  <!-- โมดอลแบนเนอร์ -->
  <div class="modal fade" id="bannerModal" tabindex="-1">
   <div class="modal-dialog">
    <div class="modal-content">
     <div class="modal-header">
      <h5 class="modal-title">
       แบนเนอร์
      </h5>
      <button class="btn-close" data-bs-dismiss="modal">
      </button>
     </div>
     <div class="modal-body">
      <input id="banId" type="hidden"/>
      <label class="form-label">
       หัวเรื่อง
      </label>
      <input class="form-control" id="banTitle"/>
      <label class="form-label mt-2">
       คำอธิบาย
      </label>
      <input class="form-control" id="banSub"/>
      <label class="form-label mt-2">
       ภาพ (ลิงก์)
      </label>
      <input class="form-control" id="banImg"/>
     </div>
     <div class="modal-footer">
      <button class="btn btn-primary" id="banSave">
       บันทึก
      </button>
     </div>
    </div>
   </div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js">
  </script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js">
  </script>
  <script src="auth.js" type="module">
  </script>
  <script src="admin.js" type="module">
  </script>
  <script src="admin-calendar.js?v=3" type="module">
  </script>
  <!-- PWA SW register (assistant v35) -->
  <script>
   if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('/sw.js');
  });
}
  </script>
 </body>
</html>
