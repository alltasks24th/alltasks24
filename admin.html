<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>หลังบ้าน — alltasks24.online</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
  <link href="assets/css/styles.css" rel="stylesheet">
</head>
<body>
<nav class="navbar navbar-expand-lg bg-white border-bottom">
  <div class="container">
    <a class="navbar-brand fw-bold" href="#">หลังบ้าน alltasks24</a>
    <div class="ms-auto d-flex gap-2">
      <span id="roleBadge" class="badge text-bg-secondary">กำลังตรวจสอบสิทธิ์…</span>
      <button id="btnLogout" class="btn btn-outline-danger btn-sm"><i class="bi bi-box-arrow-right me-1"></i>ออกจากระบบ</button>
    </div>
  </div>
</nav>

<main class="container py-4">
  <div class="alert alert-warning d-flex align-items-center gap-2" id="firstRun" style="display:none">
    <i class="bi bi-exclamation-triangle"></i>
    <div>
      <div class="fw-bold">ตั้งค่าครั้งแรก</div>
      <div class="small">ยังไม่มีผู้ใช้ (owner/admin) ในระบบ คลิกปุ่มนี้เพื่อบันทึกสิทธิ์ให้ UID ของคุณ</div>
    </div>
    <button id="btnBootstrapOwner" class="btn btn-sm btn-primary ms-auto">ตั้งฉันเป็น Owner</button>
  </div>

  <ul class="nav nav-pills mb-3" id="adminTabs" role="tablist">
    <li class="nav-item" role="presentation"><button class="nav-link active" data-bs-toggle="pill" data-bs-target="#tabDash" type="button">แดชบอร์ด</button></li>
    <li class="nav-item"><button class="nav-link" data-bs-toggle="pill" data-bs-target="#tabServices">บริการ</button></li>
    <li class="nav-item"><button class="nav-link" data-bs-toggle="pill" data-bs-target="#tabAreas">พื้นที่</button></li>
    <li class="nav-item"><button class="nav-link" data-bs-toggle="pill" data-bs-target="#tabBookings">การจอง</button></li>
    <li class="nav-item"><button class="nav-link" data-bs-toggle="pill" data-bs-target="#tabQuotes">คำขอ/ปัญหา</button></li>
    <li class="nav-item"><button class="nav-link" data-bs-toggle="pill" data-bs-target="#tabReviews">รีวิว</button></li>
    <li class="nav-item"><button class="nav-link" data-bs-toggle="pill" data-bs-target="#tabUsers">ผู้ใช้</button></li>
    <li class="nav-item"><button class="nav-link" data-bs-toggle="pill" data-bs-target="#tabPromos">โปรโมชัน</button></li>
    <li class="nav-item"><button class="nav-link" data-bs-toggle="pill" data-bs-target="#tabBanners">แบนเนอร์</button></li>
    <li class="nav-item"><button class="nav-link" data-bs-toggle="pill" data-bs-target="#tabFAQ">FAQ</button></li>
    <li class="nav-item"><button class="nav-link" data-bs-toggle="pill" data-bs-target="#tabSettings">ตั้งค่า</button></li>
    <li class="nav-item"><button class="nav-link" data-bs-toggle="pill" data-bs-target="#tabChats">แชทสด</button></li>
  </ul>

  <div class="tab-content">
    <div class="tab-pane fade show active" id="tabDash">
      <div class="row g-3">
        <div class="col-md-3"><div class="card stat-card"><div class="card-body"><div class="stat-label">คำขอจอง</div><div id="statBookings" class="stat-value">0</div></div></div></div>
        <div class="col-md-3"><div class="card stat-card"><div class="card-body"><div class="stat-label">รีวิวใหม่</div><div id="statReviews" class="stat-value">0</div></div></div></div>
        <div class="col-md-3"><div class="card stat-card"><div class="card-body"><div class="stat-label">คำขอ/ปัญหา</div><div id="statQuotes" class="stat-value">0</div></div></div></div>
        <div class="col-md-3"><div class="card stat-card"><div class="card-body"><div class="stat-label">ผู้ใช้งาน</div><div id="statUsers" class="stat-value">0</div></div></div></div>
      </div>
    </div>

    <div class="tab-pane fade" id="tabServices">
      <div class="d-flex justify-content-between align-items-center mb-2">
        <h5 class="mb-0">บริการ + หมวดหมู่</h5>
        <button class="btn btn-sm btn-primary" id="btnAddService"><i class="bi bi-plus-circle"></i> เพิ่ม</button>
      </div>
      <div id="serviceTable"></div>
    </div>

    <div class="tab-pane fade" id="tabAreas">
      <div class="d-flex justify-content-between align-items-center mb-2">
        <h5 class="mb-0">พื้นที่ให้บริการ</h5>
        <button class="btn btn-sm btn-primary" id="btnAddArea"><i class="bi bi-plus-circle"></i> เพิ่ม</button>
      </div>
      <div id="areaTable"></div>
    </div>

    <div class="tab-pane fade" id="tabBookings">
      <h5>การจองงาน/นัดหมาย</h5>
      <div id="bookingTable"></div>
    </div>

    <div class="tab-pane fade" id="tabQuotes">
      <h5>คำขอใบเสนอราคา / แจ้งปัญหา</h5>
      <div id="quoteTable"></div>
    </div>

    <div class="tab-pane fade" id="tabReviews">
      <h5>รีวิว (อนุมัติ/ลบ)</h5>
      <div id="reviewTable"></div>
    </div>

    <div class="tab-pane fade" id="tabUsers">
      <div class="d-flex justify-content-between align-items-center mb-2">
        <h5 class="mb-0">ผู้ใช้ / บทบาท</h5>
        <button class="btn btn-sm btn-primary" id="btnAddUser"><i class="bi bi-person-plus"></i> เพิ่ม</button>
      </div>
      <div id="userTable"></div>
    </div>

    <div class="tab-pane fade" id="tabPromos">
      <div class="d-flex justify-content-between align-items-center mb-2">
        <h5 class="mb-0">โปรโมชัน</h5>
        <button class="btn btn-sm btn-primary" id="btnAddPromo"><i class="bi bi-plus-circle"></i> เพิ่ม</button>
      </div>
      <div id="promoTable"></div>
    </div>

    <div class="tab-pane fade" id="tabBanners">
      <div class="d-flex justify-content-between align-items-center mb-2">
        <h5 class="mb-0">แบนเนอร์สไลด์</h5>
        <button class="btn btn-sm btn-primary" id="btnAddBanner"><i class="bi bi-plus-circle"></i> เพิ่ม</button>
      </div>
      <div id="bannerTable"></div>
    </div>

    <div class="tab-pane fade" id="tabFAQ">
      <div class="d-flex justify-content-between align-items-center mb-2">
        <h5 class="mb-0">คำถามที่พบบ่อย</h5>
        <button class="btn btn-sm btn-primary" id="btnAddFaq"><i class="bi bi-plus-circle"></i> เพิ่ม</button>
      </div>
      <div id="faqTable"></div>
    </div>

    <div class="tab-pane fade" id="tabSettings">
      <h5>ตั้งค่าทั่วไปของเว็บไซต์</h5>
      <form id="settingsForm" class="row g-3">
        <div class="col-md-6"><label class="form-label">ชื่อเว็บไซต์</label><input name="siteName" class="form-control" placeholder="รับจ้างสารพัด 24 ชั่วโมง"></div>
        <div class="col-md-6"><label class="form-label">Hero Text</label><input name="heroText" class="form-control" placeholder="จ้างง่าย ทำไว โปร่งใส"></div>
        <div class="col-md-4"><label class="form-label">เบอร์โทร</label><input name="phone" class="form-control" placeholder="080-xxx-xxxx"></div>
        <div class="col-md-4"><label class="form-label">LINE</label><input name="line" class="form-control" placeholder="@yourline"></div>
        <div class="col-md-4"><label class="form-label">Facebook URL</label><input name="facebook" class="form-control" placeholder="https://facebook.com/yourpage"></div>
        <div class="col-12"><label class="form-label">Google Maps Embed URL</label><input name="mapUrl" class="form-control" placeholder="https://www.google.com/maps?q=Bangkok&output=embed"></div>
        <div class="col-12"><label class="form-label">นโยบายสื่อ/รูปภาพ</label><textarea name="mediaPolicy" class="form-control" rows="3" placeholder="ใช้รูปจากลิงก์หรือในโฟลเดอร์เท่านั้น..."></textarea></div>
        <div class="col-12"><button class="btn btn-primary" type="submit">บันทึก</button><span id="settingsMsg" class="small text-muted ms-2"></span></div>
      </form>
    </div>

    <div class="tab-pane fade" id="tabChats">
      <h5>ห้องแชททั้งหมด</h5>
      <div id="chatThreadList" class="list-group"></div>
      <hr>
      <div id="chatRoom" style="display:none">
        <h6 id="chatRoomTitle" class="mb-2">ห้องแชท</h6>
        <div id="chatRoomBody" class="chat-admin-body"></div>
        <div class="d-flex gap-2 mt-2">
          <input id="chatReply" class="form-control" placeholder="พิมพ์ข้อความตอบกลับ...">
          <button id="chatReplySend" class="btn btn-primary">ส่ง</button>
        </div>
      </div>
    </div>
  </div>
</main>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script type="module" src="assets/js/admin.js"></script>
</body>
</html>
